(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-827b9d62"],{"1c40":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map-container"}},[t("div",{staticStyle:{position:"absolute",right:"50px",top:"50px","z-index":"999"}},[t("span",[e._v("标绘：")]),t("button",{on:{click:function(t){return e.drawingGraphicsTool("标绘","point")}}},[e._v("点")]),t("button",{on:{click:function(t){return e.drawingGraphicsTool("标绘","polyline")}}},[e._v("线")]),t("button",{on:{click:function(t){return e.drawingGraphicsTool("标绘","polygon")}}},[e._v("面")]),t("button",{on:{click:function(t){return e.drawingGraphicsTool("标绘","point","text")}}},[e._v("文字")]),t("br"),t("span",[e._v("空间测量：")]),t("button",{on:{click:function(t){return e.drawingGraphicsTool("空间测量","point")}}},[e._v("坐标测量")]),t("button",{on:{click:function(t){return e.drawingGraphicsTool("空间测量","polyline")}}},[e._v("距离测量")]),t("button",{on:{click:function(t){return e.drawingGraphicsTool("空间测量","polygon")}}},[e._v("面积测量")]),t("br"),t("span",[e._v("空间统计：")]),t("button",{on:{click:function(t){return e.drawingGraphicsTool("空间统计","point")}}},[e._v("点")]),t("button",{on:{click:function(t){return e.drawingGraphicsTool("空间统计","polyline")}}},[e._v("线")]),t("button",{on:{click:function(t){return e.drawingGraphicsTool("空间统计","polygon")}}},[e._v("面")]),t("br"),t("button",{on:{click:function(t){return e.drawingGraphicsTool()}}},[e._v("clear")])])])},o=[],s=r("afaa"),n=r("5c96");let a=null,l=null,c={};function u(e){const t="<div><p>经度："+e.geometry.x.toFixed(6)+"</p><p>纬度："+e.geometry.y.toFixed(6)+"</p></div>";this.map.infoWindow.resize(200,100),this.map.infoWindow.setTitle("坐标信息"),this.map.infoWindow.setContent(t),this.map.infoWindow.show(e.geometry),this.map.infoWindow.on("hide",()=>{})}function m(){return{url:r("435f"),height:20,width:20,type:"esriPMS",angle:0}}function p(e){return"fill"===e?new this.gisConstructor.Color([255,0,0,.25]):new this.gisConstructor.Color([255,0,0,.8])}function g(){return{color:p.call(this,"line"),width:2}}function h(e){let t=this;return{text:e,color:[255,0,0],font:new t.gisConstructor.Font({family:"microsoft Yahei",size:8,style:"normal",weight:"bold"}),haloColor:[255,255,255],haloSize:2,horizontalAlignment:"center",xoffset:0,yoffset:0}}function d(e){const t=a.graphics;for(let r=t.length-1;r>=0;r--)t[r].attributes.id&&t[r].attributes.id===e&&a.remove(t[r])}function y(e){if(e.graphic&&e.graphic.attributes){let t=e.graphic.attributes;d(t.id)}}function f(e){let t=c.StatisticalServerURL||"",r=new this.gisConstructor.query;r.geometry=e,r.outFields=["*"],r.returnGeometry=!0;var i=new this.gisConstructor.QueryTask(t);i.execute(r,e=>{console.log(e)},e=>{console.log(e)})}function S(e){let t=this,r="",i=e.geometry.type,o="",s="symbolMarker"+(new Date).getTime();if("标绘"===c.name&&("point"===i&&!1===c.text?(o=new this.gisConstructor.PictureMarkerSymbol(m.call(this)),a.add(new this.gisConstructor.graphic(e.geometry,o,{id:s,name:"图形标注"}))):"point"===i&&!0===c.text?n["MessageBox"].prompt("","请输入文字",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:t})=>{""!==t&&(o=new this.gisConstructor.TextSymbol(h.call(this,t)),a.add(new this.gisConstructor.graphic(e.geometry,o,{id:s,name:"图形标注"})))}).catch(e=>{console.log(e)}):"polyline"===i?(o=new this.gisConstructor.SimpleLineSymbol(g.call(this)),console.log(e.geometry),a.add(new this.gisConstructor.graphic(e.geometry,o,{id:s,name:"图形标注"}))):"polygon"===i&&(o=new this.gisConstructor.SimpleFillSymbol(this.gisConstructor.SimpleFillSymbol.STYLE_SOLID,new this.gisConstructor.SimpleLineSymbol(g.call(this)),p.call(this,"fill")),a.add(new this.gisConstructor.graphic(e.geometry,o,{id:s,name:"图形标注"})))),"空间测量"===c.name)if("point"===i)u.call(this,e);else if("polyline"===i){o=new this.gisConstructor.SimpleLineSymbol(g.call(this)),a.add(new this.gisConstructor.graphic(e.geometry,o,{id:s,name:"图形标注"}));const r=new t.gisConstructor.LengthsParameters,i=new t.gisConstructor.GeometryService(c.GeometryServerURL);r.distanceUnit=t.gisConstructor.GeometryService.UNIT_KILOMETER,r.calculationType="preserveShape";const n=new t.gisConstructor.Polyline(t.map.spatialReference),l=e.geometry.paths[0];n.addPath(l),r.polylines=[n],i.lengths(r,r=>{let i=t.gisConstructor.number.format(r.lengths[0]),o="总长度:"+i+"米";const n=new t.gisConstructor.TextSymbol(h.call(this,o)),l=e.geometry.getExtent().getCenter(),c=new t.gisConstructor.Point(l,t.map.spatialReference),u=new t.gisConstructor.graphic(c,n,{id:s,name:"图形标注"});a.add(u)})}else if("polygon"===i){o=new this.gisConstructor.SimpleFillSymbol(this.gisConstructor.SimpleFillSymbol.STYLE_SOLID,new this.gisConstructor.SimpleLineSymbol(g.call(this)),p.call(this,"fill")),a.add(new this.gisConstructor.graphic(e.geometry,o,{id:s,name:"图形标注"}));const t=new this.gisConstructor.AreasAndLengthsParameters,r=new this.gisConstructor.GeometryService(c.GeometryServerURL);t.areaUnit=this.gisConstructor.GeometryService.UNIT_SQUARE_KILOMETERS,t.calculationType="preserveShape",r.simplify([e.geometry],i=>{t.polygons=i,r.areasAndLengths(t,t=>{let r=this.gisConstructor.number.format(t.areas[0]),i=r+"平方公里";const o=new this.gisConstructor.TextSymbol(h.call(this,i)),n=e.geometry.getExtent().getCenter(),l=new this.gisConstructor.Point(n,this.map.spatialReference),c=new this.gisConstructor.graphic(l,o,{id:s,name:"图形标注"});a.add(c)})})}if("空间统计"===c.name){"point"===i?r=new this.gisConstructor.SimpleMarkerSymbol(this.gisConstructor.SimpleMarkerSymbol.STYLE_SQUARE,10,new this.gisConstructor.SimpleLineSymbol(g.call(this)),p.call(this,"fill")):"polyline"===i?r=new t.gisConstructor.SimpleLineSymbol(g.call(this)):"polygon"===i&&(r=new this.gisConstructor.SimpleFillSymbol(this.gisConstructor.SimpleFillSymbol.STYLE_NONE,new this.gisConstructor.SimpleLineSymbol(this.gisConstructor.SimpleLineSymbol.STYLE_DASHDOT,new this.gisConstructor.SimpleLineSymbol(g.call(this)),p.call(this,"fill")),new this.gisConstructor.Color(p.call(this,"fill"))));let o=new this.gisConstructor.graphic(e.geometry,r,{id:s,name:"图形标注"});a.add(o);let n=new this.gisConstructor.BufferParameters;n.bufferSpatialReference=this.map.spatialReference,n.outSpatialReference=this.map.spatialReference,n.distances=[Number(c.distances)||1],n.unit=this.gisConstructor.GeometryService.UNIT_METER,n.geodesic=!0,n.geometries=[o.geometry],new this.gisConstructor.GeometryService(c.GeometryServerURL||"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer").buffer(n,e=>{let r=new t.gisConstructor.SimpleFillSymbol(t.gisConstructor.SimpleFillSymbol.STYLE_SOLID,new t.gisConstructor.SimpleLineSymbol(g.call(this)),new t.gisConstructor.Color(p.call(this,"fill"))),i=new t.gisConstructor.graphic(e[0],r,{id:s,name:"图形标注"});a.add(i),f.call(t,i.geometry);let o=e[0].rings;console.log(o)})}l.deactivate(),this.map.setMapCursor("default")}function v(){a=new this.gisConstructor.GraphicsLayer("",{id:"绘制图层"},this.map.spatialReference),this.map.addLayer(a),l=new this.gisConstructor.draw(this.map,{showTooltips:!0}),l.on("draw-complete",S.bind(this))}function w(e,t){c=t,l||v.call(this),"active"===e?(l.activate(t.type),this.map.setMapCursor("crosshair")):(l.deactivate(),this.map.setMapCursor("default"),a.clear(),this.map.infoWindow.hide()),this.map.on("click",y.bind(this))}var b={name:"DrawingGraphics",components:{},data(){return{map:"",gisConstructor:{},gisModules:["esri/map","esri/SpatialReference","esri/geometry/Extent","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/geometryEngine","esri/tasks/GeometryService","esri/tasks/ProjectParameters","esri/tasks/AreasAndLengthsParameters","esri/tasks/LengthsParameters","esri/tasks/query","esri/tasks/QueryTask","esri/tasks/BufferParameters","esri/graphic","esri/symbols/PictureMarkerSymbol","esri/symbols/TextSymbol","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/Font","esri/layers/GraphicsLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/toolbars/draw","esri/Color","dojo/_base/declare","dojo/number","esri/config","esri/geometry/normalizeUtils"]}},mounted(){this.init()},methods:{mapClickFun(){this.map.on("click",()=>{})},drawingGraphicsTool(e,t,r){if(e&&t){let i={};"标绘"===e&&(i={name:"标绘",type:t,text:!!r}),"空间测量"===e&&(i={GeometryServerURL:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer",name:"空间测量",type:t}),"空间统计"===e&&(i={StatisticalServerURL:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/StoryMaps/StoryMapPlaces4/MapServer/0",GeometryServerURL:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer",distances:100,name:"空间统计",type:t}),w.call(this,"active",i)}else w.call(this,"clear")},init(){Object(s["loadCss"])("https://js.arcgis.com/3.32/esri/css/esri.css"),Object(s["loadModules"])(this.gisModules,{url:"https://js.arcgis.com/3.32/init.js"}).then(this.initMap).then(this.mapClickFun)},initMap(e){for(let i in e){let t=this.gisModules[i].split("/").pop();this.gisConstructor[t]=e[i]}this.map=new this.gisConstructor.map("map-container",{basemap:"hybrid",logo:!1,slider:!0});let t={xmin:-117.1839455,ymin:32.68087830000002,xmax:-117.15035189999998,ymax:32.732100979999984};this.map.setExtent(new this.gisConstructor.Extent(t.xmin,t.ymin,t.xmax,t.ymax,new this.gisConstructor.SpatialReference));let r=new this.gisConstructor.ArcGISDynamicMapServiceLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/StoryMaps/StoryMapPlaces4/MapServer",{id:"StoryMapPlaces4",opacity:1,visible:!0});this.map.addLayer(r,2)}}},C=b,A=r("2877"),x=Object(A["a"])(C,i,o,!1,null,null,null);t["default"]=x.exports},"435f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAH7UlEQVR4nO1a7U9b1x3mT+BPyJ9g1b7X916Mufiee31t4xds3iyDeQlNjU2MKevosgSYMqmalAy0LNK0hYZ8WKZJadNKVJkmrbAl2vKhaVClSWlSNaQVmLI0EJup+/bsQ7B97jUY27GvqcQj/b5Z5/ye5/zezrluajrBCU5wAgMgMLJJYMksz0q3BYY8FFgCjTHkIc9KtwWWzAqMbGq0vzUBZxJP8QyZ51npaRHhI4xnpac8Q+Y5k3iq0TwqhskkNguMdL1S0ocaI103mcTmRvMqCzwrBQRG2jmISNLhxaf9Ufx79DS+jb+FzYkYtibHsDU5hi9Oj+APJIiIoB4mwg7PSoFG8yuJg069g1fwr+gQdt9JYG8upbWZCWTjMWR7h5FxD+TtiTOMG+1BEFY+MBoazbMIJpPYvF/A8o66eQWrA1Fkfp4sJj47gWwihow/qiGut001gqtioEgInpVuH6uU0JN/R/Hh5c/OFhOfS2FvMoFscKgkcb2tKeGi1OBZ6XajeTc1NRWH/fvBPmQvTBQTv5BEdnC0IuL6aJiydWhFYKSFhpLnWSlAO7TU1XfgqWd/kkAmMFg1edqKRGhUYdxvdflqf8EdwN7MAfk+GUem4/WJ05GgSQdG2mlIPeAZaSnnRKhVReZ8Mfns+FjNiOtrAl0YeUZaMpQ8ZxJP0WH42ZsjxeQnxpBx99dFgIx7AFfFgCYVDJ0YeUZayG3ca3dhb0Zb9LJTCWQ89SFOp4IuCowriPRs/8WZ01ry02eR8Zbu7xn3ADbUCD5whPCBI4QNNVKVCDfag5q7gyHk9291EFgCm5Voc392Atng0dV+Q41ggC8UsgFerUqEJ86wbko04BYpsGQut+EvPEHt6Y+U1+dvOUJFI+4tR6iqKKA7Am8hKSME+Ci34f2R4YIAbyfKD10xWDMBfmf30+t8VH8BqMeMr+Jv7od+qqLxdkONoJ9Kgf4qUyDjHsCnrT7No0r9BaBObWsy/ir0E7GKHd9QI7ghBnFDDFZNPuMewCPBo4kkQwV4/tNx7M1M1GzMrdjUfjxjlAYKMD2ObLzy06+V7UjdxgvAs9J6brPtqTgy3cMNE+C5zYevWaoLsNJ6/QVgyGpuw88HK7vX1zr8tywyHnJuahokqwYIULgEzbV6GybAC0cX0maCm5zL2HGYYxxDuQ0DnLNhAnzHuZA2EwxaCzWAYxxD9RdAdxNcU8KGk99xdCNtJviG1T6TGXYjpOvAjM3YNHipRvAd40TaTPAnTiNA/afAHOg0kK0yNl9jkKnUtnkP0maCTUZBKyMZG/45mExiM8+Q3dzmV8WAIeS/bw0gbSZImwmWqQnQkPanB30rNCIKXoihPPkNRoGNIY05/Rz0UTBl89SPfHsX0m9IeQF+T+U+z5Ddhn0koWuBwBLck3vrE/YU+S+tusrfiNOnQXeEAOesWSq8dEawzbvzxNNmgrRFRkDzYcSAye8o0E9ktUqFF+1d2GIULfk3COZ5begfmz9S0AWx6tcdVwQvxBC2rS4t8X37m+7eb8jzVyWgU6HsCdHVj13Si+c2H7Ys8oHE02aCL/Xkj0Po66HvCi6W4KsWL563+vG9PVCw1gD+09KBbc59KGHavrG64KTf/1lp/Vh9GqehrwcTnBPpEid7pDEK+lnleOb9YdC3ximrUiV5GWetzuPV8soFbyEp2vFzlYrAyEhZlR8P+Vf5L7fxjDQxEvRe9xLnXckmZ6sSwaIgqTt5ySZnvcR5dyTovc4z0gTPyG0NrQM8I7cpdvU9L3HeFQXyA+2sxqjbWl6EUjWBcWKcc5ZcgzalTdnxEuddxa6+V/fawLHSoI+oH7e3yP87lDBL0KmoiPf6cDEWwrVzYUR92hb27mEisCpiOvJRnwfXzoUxP9mDeK8P8V7fofsKLIEokB98RP1YsBB/bUi/ev2ZtfPyf/WbRf2ePMkHi6PI3EkAq8kD7WJM+y0wycrYMBdEeGZV4WO061+MhQ5dD6tJPFgcxfKlaF4cvX/7Ps9WnSoCS2btHNnTO7V8KYrND2MlnStHhD6W4Bmj4GurCx6d89fOhStePyfK/GQPOpXCyLzPYbZs4vsDzYreoVInXK4tX4pqiDoYSfOqI7AEy5eir70PVpP4+9VhjRA8Q1bKEoD+94fcquDxzTM1cYgWQW5VikJWblVqRj5nmTsJTA91UiKU8WyuCfm5X0GDGjn2+OYZjQg1FXrtisblB5+t0R1lp4wIKMzzQZcXmX/++tWia1dqfjpRvwfxXl9N0itv96YL/q5dwfy7Z6hIk9aOFEA/yip2Bf+4OlxT8kbY5ocxTA/r/klW7jQp6O73AksQdLqweD5c85pQL/KKXVtnKn4/4CxEbG+R7x84gdkVTA8HsHg+jM/fH62qLWI1CTz6I/DtatVEHyyO4s+/jBSl0OObhbBvb5Hvv9aUyFmIKNuUv5aawHKW6PMj0efHwts9WDwfzgtEm0asp3eAnSdFztO//+RyFJ9cLu4ONEnN3LBydhcryYW5t0Lumo7HJpPYzDGOIR9R74mCUnIcrofphyNagN9M9aSxklzAyrhYM8JHQWBkE28hqZBT/Uu3y71ebwHmJ3tyJ7yKleQSVpJzl1NdqWP1NsiZxFOchYi8haSGOz1L4Q73LT9RH3W73OvdLve60qbsHkVUaVN2c7/3E/XRcKdnaazH99tj+wx2ghOc4EeN/wOQnyeF91WowgAAAABJRU5ErkJggg=="},afaa:function(e,t,r){(function(e,r){r(t)})(0,(function(e){"use strict";var t="4.17",r="next";function i(e){if(e.toLowerCase()===r)return r;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function o(e){return void 0===e&&(e=t),"https://js.arcgis.com/"+e+"/"}function s(e){void 0===e&&(e=t);var s=o(e),n=i(e);if(n!==r&&3===n.major){var a=n.minor<=10?"js/":"";return""+s+a+"esri/css/esri.css"}return s+"esri/themes/light/main.css"}function n(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function a(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function l(e){return document.querySelector('link[href*="'+e+'"]')}function c(e){return!e||i(e)?s(e):e}function u(e,t){var r=c(e),i=l(r);return i||(i=n(r),a(i,t)),i}var m="undefined"!==typeof window,p={Promise:m?window["Promise"]:void 0},g={};function h(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function d(e,t,r){var i;r&&(i=y(e,r));var o=function(){t(e),e.removeEventListener("load",o,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",o,!1)}function y(e,t){var r=function(i){t(i.error||new Error("There was an error attempting to load "+e.src)),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function f(e){void 0===e&&(e={}),g=e}function S(){return document.querySelector("script[data-esri-loader]")}function v(){var e=window["require"];return e&&e.on}function w(e){void 0===e&&(e={});var t={};[g,e].forEach((function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}));var r=t.version,i=t.url||o(r);return new p.Promise((function(e,o){var s=S();if(s){var n=s.getAttribute("src");n!==i?o(new Error("The ArcGIS API for JavaScript is already loaded ("+n+").")):v()?e(s):d(s,e,o)}else if(v())o(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=t.css;if(a){var l=!0===a;u(l?r:a,t.insertCssBefore)}t.dojoConfig&&(window["dojoConfig"]=t.dojoConfig),s=h(i),d(s,(function(){s.setAttribute("data-esri-loader","loaded"),e(s)}),o),document.body.appendChild(s)}}))}function b(e){return new p.Promise((function(t,r){var i=window["require"].on("error",r);window["require"](e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];i.remove(),t(e)}))}))}function C(e,t){if(void 0===t&&(t={}),v())return b(e);var r=S(),i=r&&r.getAttribute("src");return!t.url&&i&&(t.url=i),w(t).then((function(){return b(e)}))}var A={getScript:S,isLoaded:v,loadModules:C,loadScript:w,loadCss:u,setDefaultOptions:f,utils:p};e.getScript=S,e.isLoaded=v,e.loadModules=C,e.loadScript=w,e.loadCss=u,e.setDefaultOptions=f,e.utils=p,e["default"]=A,Object.defineProperty(e,"__esModule",{value:!0})}))}}]);