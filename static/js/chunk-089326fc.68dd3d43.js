(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-089326fc"],{"2f7b":function(t,e,r){},afaa:function(t,e,r){(function(t,r){r(e)})(0,(function(t){"use strict";var e="4.17",r="next";function i(t){if(t.toLowerCase()===r)return r;var e=t&&t.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function o(t){return void 0===t&&(t=e),"https://js.arcgis.com/"+t+"/"}function s(t){void 0===t&&(t=e);var s=o(t),n=i(t);if(n!==r&&3===n.major){var a=n.minor<=10?"js/":"";return""+s+a+"esri/css/esri.css"}return s+"esri/themes/light/main.css"}function n(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e}function a(t,e){if(e){var r=document.querySelector(e);r.parentNode.insertBefore(t,r)}else document.head.appendChild(t)}function c(t){return document.querySelector('link[href*="'+t+'"]')}function l(t){return!t||i(t)?s(t):t}function u(t,e){var r=l(t),i=c(r);return i||(i=n(r),a(i,e)),i}var d="undefined"!==typeof window,m={Promise:d?window["Promise"]:void 0},p={};function v(t){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e.setAttribute("data-esri-loader","loading"),e}function h(t,e,r){var i;r&&(i=f(t,r));var o=function(){e(t),t.removeEventListener("load",o,!1),i&&t.removeEventListener("error",i,!1)};t.addEventListener("load",o,!1)}function f(t,e){var r=function(i){e(i.error||new Error("There was an error attempting to load "+t.src)),t.removeEventListener("error",r,!1)};return t.addEventListener("error",r,!1),r}function g(t){void 0===t&&(t={}),p=t}function b(){return document.querySelector("script[data-esri-loader]")}function w(){var t=window["require"];return t&&t.on}function y(t){void 0===t&&(t={});var e={};[p,t].forEach((function(t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}));var r=e.version,i=e.url||o(r);return new m.Promise((function(t,o){var s=b();if(s){var n=s.getAttribute("src");n!==i?o(new Error("The ArcGIS API for JavaScript is already loaded ("+n+").")):w()?t(s):h(s,t,o)}else if(w())o(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=e.css;if(a){var c=!0===a;u(c?r:a,e.insertCssBefore)}e.dojoConfig&&(window["dojoConfig"]=e.dojoConfig),s=v(i),h(s,(function(){s.setAttribute("data-esri-loader","loaded"),t(s)}),o),document.body.appendChild(s)}}))}function C(t){return new m.Promise((function(e,r){var i=window["require"].on("error",r);window["require"](t,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];i.remove(),e(t)}))}))}function L(t,e){if(void 0===e&&(e={}),w())return C(t);var r=b(),i=r&&r.getAttribute("src");return!e.url&&i&&(e.url=i),y(e).then((function(){return C(t)}))}var S={getScript:b,isLoaded:w,loadModules:L,loadScript:y,loadCss:u,setDefaultOptions:g,utils:m};t.getScript=b,t.isLoaded=w,t.loadModules=L,t.loadScript=y,t.loadCss=u,t.setDefaultOptions=g,t.utils=m,t["default"]=S,Object.defineProperty(t,"__esModule",{value:!0})}))},c358:function(t,e,r){"use strict";r("2f7b")},e9cb:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this;t._self._c;return t._m(0)},o=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map-container"}},[e("div",{attrs:{id:"HomeButton"}}),e("div",{attrs:{id:"LocateButton"}}),e("div",{staticClass:"navigation-toolbar",attrs:{id:"navigation-toolbar"}},[e("div",{staticClass:"nt-translation"},[e("button",{attrs:{id:"resize"}}),e("button",{attrs:{id:"east"}}),e("button",{attrs:{id:"west"}}),e("button",{attrs:{id:"south"}}),e("button",{attrs:{id:"north"}})]),e("div",{staticClass:"nt-zoom"},[e("button",{staticClass:"rule",attrs:{id:"rule"}}),e("button",{attrs:{id:"site"}}),e("button",{attrs:{id:"zoomUp"}}),e("button",{attrs:{id:"zoomDowm"}})])])])}],s=r("afaa"),n={name:"InitMap",data(){return{navToolbar:null,map:"",gisConstructor:{},gisModules:["esri/geometry/webMercatorUtils","esri/geometry/Point","esri/SpatialReference","esri/tasks/GeometryService","esri/tasks/ProjectParameters","esri/toolbars/navigation","dojo/_base/declare","esri/dijit/OverviewMap","esri/dijit/Scalebar","esri/dijit/LocateButton","esri/dijit/HomeButton","esri/layers/OpenStreetMapLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/geometry/Extent","esri/map"]}},mounted(){this.init()},methods:{mapClickFun(){this.map.on("click",t=>{console.log(t),console.log(this.gisConstructor.webMercatorUtils.xyToLngLat(t.mapPoint.x,t.mapPoint.y)),console.log([t.mapPoint.getLongitude(),t.mapPoint.getLatitude()]);let e=new this.gisConstructor.ProjectParameters;e.geometries=[t.mapPoint],e.outSR=new this.gisConstructor.SpatialReference({wkid:4490}),e.transformForward=!0;let r=new this.gisConstructor.GeometryService("https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer");r.project(e,t=>{console.log(t[0])})})},init(){Object(s["loadCss"])("https://js.arcgis.com/3.32/esri/css/esri.css"),Object(s["loadModules"])(this.gisModules,{url:"https://js.arcgis.com/3.32/"}).then(this.initMap).then(this.mapClickFun)},initMap(t){for(let m in t){let e=this.gisModules[m].split("/").pop();this.gisConstructor[e]=t[m]}this.map=new this.gisConstructor.map("map-container",{zoom:12,logo:!1,slider:!0,isZoomSlider:!0,isDoubleClickZoom:!1,autoResize:!0});let e=new this.gisConstructor.ArcGISTiledMapServiceLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer",{id:"电子地图",visible:!0});this.map.addLayer(e);let r={xmin:-117.1839455,ymin:32.68087830000002,xmax:-117.15035189999998,ymax:32.732100979999984};this.map.setExtent(new this.gisConstructor.Extent(r.xmin,r.ymin,r.xmax,r.ymax));let i=new this.gisConstructor.HomeButton({map:this.map},"HomeButton");i.startup();let o=new this.gisConstructor.LocateButton({map:this.map},"LocateButton");o.startup();new this.gisConstructor.Scalebar({map:this.map,scalebarUnit:"metric"});let s=document.getElementById("navigation-toolbar"),n=s.querySelectorAll("button"),a="",c="",l="",u=40,d=3;for(let m=0;m<n.length;m++)"site"===n[m].getAttribute("id")&&(a=n[m],a.style.bottom=this.map.getLevel()*d+u+"px"),"rule"===n[m].getAttribute("id")&&(c=n[m],l=c.getBoundingClientRect().top),n[m].onclick=t=>{let e=t.target.getAttribute("id");switch(e){case"resize":this.map.setExtent(new this.gisConstructor.Extent(r.xmin,r.ymin,r.xmax,r.ymax)),a.style.bottom=this.map.getLevel()*d+u+"px";break;case"east":this.map.panRight();break;case"west":this.map.panLeft();break;case"north":this.map.panDown();break;case"south":this.map.panUp();break;case"zoomUp":this.map.setLevel(this.map.getLevel()+1),a.style.bottom=this.map.getLevel()*d+u+"px";break;case"zoomDowm":this.map.setLevel(this.map.getLevel()-1),a.style.bottom=this.map.getLevel()*d+u+"px";break;case"rule":console.log(t.clientY),console.log(l);break}}}}},a=n,c=(r("c358"),r("2877")),l=Object(c["a"])(a,i,o,!1,null,null,null);e["default"]=l.exports}}]);